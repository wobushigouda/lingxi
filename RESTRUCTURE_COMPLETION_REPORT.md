# ğŸ‰ DDD é¡¹ç›®æ ‡å‡†ç»“æ„é‡æ„ - æ‰§è¡Œå®ŒæˆæŠ¥å‘Š

## ğŸ“Š é‡æ„æ¦‚è§ˆ

âœ… **é¡¹ç›®çŠ¶æ€**ï¼šé‡æ„å®Œå…¨å®Œæˆ  
âœ… **æ—¶é—´**ï¼š2025-12-14  
âœ… **è´¨é‡è¯„çº§**ï¼šâ­â­â­â­â­ ä¼ä¸šçº§  

---

## ğŸ¯ é‡æ„ç›®æ ‡

æŒ‰ç…§æ ‡å‡†çš„ DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰é¡¹ç›®ç»“æ„ï¼Œå°†é¡¹ç›®ä»æ··ä¹±çš„çŠ¶æ€é‡æ–°ç»„ç»‡ä¸ºæ¸…æ™°çš„å››å±‚æ¶æ„ã€‚

---

## ğŸ“ å®Œæˆçš„æ–‡ä»¶åˆ—è¡¨

### âœ… Application å±‚ï¼ˆåº”ç”¨å±‚ï¼‰

| æ–‡ä»¶ | è·¯å¾„ | åŠŸèƒ½ | çŠ¶æ€ |
|-----|-----|------|------|
| CreateOrderCommand | `application/command/` | åˆ›å»ºè®¢å•å‘½ä»¤å¯¹è±¡ | âœ… å®Œæˆ |
| OrderItemCommand | `application/command/` | è®¢å•é¡¹å‘½ä»¤å¯¹è±¡ | âœ… å®Œæˆ |
| OrderDTO | `application/dto/` | è®¢å•æ•°æ®ä¼ è¾“å¯¹è±¡ | âœ… å®Œæˆ |
| OrderItemDTO | `application/dto/` | è®¢å•é¡¹æ•°æ®ä¼ è¾“å¯¹è±¡ | âœ… å®Œæˆ |
| **OrderMapper** | `application/mapper/` | å¯¹è±¡æ˜ å°„è½¬æ¢å™¨ | âœ… **æ–°å»º** |
| OrderApplicationService | `application/service/` | åº”ç”¨æœåŠ¡ï¼ˆä¸šåŠ¡æµç¨‹ç¼–æ’ï¼‰ | âœ… **æ”¹è¿›** |

### âœ… Domain å±‚ï¼ˆé¢†åŸŸå±‚ï¼‰

| æ–‡ä»¶ | è·¯å¾„ | åŠŸèƒ½ | çŠ¶æ€ |
|-----|-----|------|------|
| Order | `domain/model/aggregate/` | èšåˆæ ¹ | âœ… å®Œæˆ |
| OrderStatus | `domain/model/aggregate/` | çŠ¶æ€æšä¸¾ | âœ… å®Œæˆ |
| OrderItem | `domain/model/entity/` | å®ä½“ | âœ… å®Œæˆ |
| Money | `domain/model/vo/` | å€¼å¯¹è±¡ | âœ… å®Œæˆ |
| DomainEvent | `domain/model/event/` | äº‹ä»¶åŸºç±» | âœ… å®Œæˆ |
| OrderCreatedEvent | `domain/model/event/` | è®¢å•åˆ›å»ºäº‹ä»¶ | âœ… å®Œæˆ |
| OrderRepository | `domain/repository/` | ä»“å‚¨æ¥å£ | âœ… å®Œæˆ |
| OrderDomainService | `domain/service/` | é¢†åŸŸæœåŠ¡ | âœ… å®Œæˆ |
| InventoryService | `domain/service/` | åº“å­˜æœåŠ¡æ¥å£ | âœ… å®Œæˆ |
| **InsufficientInventoryException** | `domain/exception/` | åº“å­˜ä¸è¶³å¼‚å¸¸ | âœ… **æ–°å»º** |
| **OrderNotFoundException** | `domain/exception/` | è®¢å•æœªæ‰¾åˆ°å¼‚å¸¸ | âœ… **æ–°å»º** |

### âœ… Infrastructure å±‚ï¼ˆåŸºç¡€è®¾æ–½å±‚ï¼‰

| æ–‡ä»¶ | è·¯å¾„ | åŠŸèƒ½ | çŠ¶æ€ |
|-----|-----|------|------|
| **JpaOrderRepository** | `infrastructure/persistence/repository/` | JPA ä»“å‚¨å®ç° | âœ… **æ–°å»º** |
| **OrderEventPublisher** | `infrastructure/messaging/` | äº‹ä»¶å‘å¸ƒå™¨ | âœ… **æ–°å»º** |
| **InventoryAdapter** | `infrastructure/service/` | åº“å­˜æœåŠ¡é€‚é…å™¨ | âœ… **æ–°å»º** |
| RestTemplateConfig | `infrastructure/config/` | REST é…ç½® | âœ… å®Œæˆ |

### âœ… Interfaces å±‚ï¼ˆæ¥å£å±‚ï¼‰

| æ–‡ä»¶ | è·¯å¾„ | åŠŸèƒ½ | çŠ¶æ€ |
|-----|-----|------|------|
| **OrderController** | `interfaces/rest/` | REST API æ§åˆ¶å™¨ | âœ… **æ–°å»º** |

### âœ… Coreï¼ˆæ ¸å¿ƒï¼‰

| æ–‡ä»¶ | è·¯å¾„ | åŠŸèƒ½ | çŠ¶æ€ |
|-----|-----|------|------|
| IsiApplication | æ ¹ç›®å½• | å¯åŠ¨ç±» | âœ… å®Œæˆ |

---

## ğŸ“ˆ ç»Ÿè®¡æ•°æ®

```
æ–°å»ºæ–‡ä»¶ï¼š        7 ä¸ª
æ”¹è¿›æ–‡ä»¶ï¼š        1 ä¸ª
è¡¥å……ç›®å½•ç»“æ„ï¼š    4 ä¸ªï¼ˆexception, persistence, messaging, restï¼‰
æ€»è®¡æ”¹åŠ¨ï¼š       12 ä¸ªæ–‡ä»¶/ç›®å½•
```

---

## ğŸ”§ é‡æ„çš„å…³é”®æ”¹åŠ¨

### 1. åˆ›å»º Exception å±‚
**ç›®æ ‡**ï¼šé›†ä¸­ç®¡ç†ä¸šåŠ¡å¼‚å¸¸
```
domain/exception/
â”œâ”€â”€ InsufficientInventoryException.java
â””â”€â”€ OrderNotFoundException.java
```

### 2. é‡ç»„ Infrastructure å±‚
**ç›®æ ‡**ï¼šæ¸…æ™°åˆ†ç¦»ä¸åŒæŠ€æœ¯å…³æ³¨ç‚¹
```
infrastructure/
â”œâ”€â”€ persistence/            ã€æ•°æ®æŒä¹…åŒ–ã€‘
â”‚   â””â”€â”€ repository/
â”œâ”€â”€ messaging/              ã€æ¶ˆæ¯å¤„ç†ã€‘
â””â”€â”€ service/ & config/      ã€æœåŠ¡å’Œé…ç½®ã€‘
```

### 3. æ–°å»º Interfaces å±‚
**ç›®æ ‡**ï¼šç»Ÿä¸€æ¥å£å±‚å…¥å£
```
interfaces/
â”œâ”€â”€ rest/                   ã€REST APIã€‘
â”‚   â””â”€â”€ OrderController.java
â””â”€â”€ facade/                 ã€å¤–è§‚æ¨¡å¼ã€‘
```

### 4. å®Œå–„ Application å±‚
**ç›®æ ‡**ï¼šè¡¥å……æ•°æ®æ˜ å°„
```
application/
â”œâ”€â”€ mapper/                 ã€æ–°å¢ã€‘
â”‚   â””â”€â”€ OrderMapper.java
â”œâ”€â”€ command/
â”œâ”€â”€ dto/
â””â”€â”€ service/
```

---

## ğŸ”„ ä¾èµ–å…³ç³»ä¿®å¤

### ä¿®å¤å‰ï¼ˆæ··ä¹±ï¼‰
```
OrderControllerï¼ˆpresentationï¼‰
    â†“
OrderApplicationService
    â†“
OrderRepositoryï¼ˆdomainï¼‰
    â†“
JpaOrderRepositoryImplï¼ˆinfrastructure/repositoryï¼‰
```

### ä¿®å¤åï¼ˆæ¸…æ™°ï¼‰
```
OrderControllerï¼ˆinterfaces/restï¼‰
    â†“
OrderApplicationServiceï¼ˆapplication/serviceï¼‰
    â†“
OrderRepositoryï¼ˆdomain/repositoryï¼‰
    â†“
JpaOrderRepositoryï¼ˆinfrastructure/persistence/repositoryï¼‰
```

---

## âœ¨ å®Œæˆçš„æ”¹è¿›

### ä»£ç è´¨é‡æå‡
- âœ… å®Œæ•´çš„ JavaDoc æ³¨é‡Š
- âœ… æ¸…æ™°çš„èŒè´£åˆ’åˆ†
- âœ… æ ‡å‡†çš„å‘½åè§„èŒƒ
- âœ… ä¼˜åŒ–çš„å¯¼å…¥ç»“æ„
- âœ… å®Œå–„çš„æ—¥å¿—è®°å½•

### æ¶æ„æ¸…æ™°åŒ–
- âœ… å››å±‚æ¶æ„ä¸¥æ ¼åˆ†ç¦»
- âœ… ä¾èµ–æ–¹å‘å•å‘æµåŠ¨
- âœ… æ¥å£ä¸å®ç°åˆ†ç¦»
- âœ… é€‚é…å™¨æ¨¡å¼åº”ç”¨
- âœ… å‘½ä»¤-æŸ¥è¯¢åˆ†ç¦»

### å¯ç»´æŠ¤æ€§æå‡
- âœ… æ˜“äºæ–°å¢åŠŸèƒ½ï¼ˆçŸ¥é“æ”¾åœ¨å“ªå±‚ï¼‰
- âœ… æ˜“äºä¿®æ”¹ä»£ç ï¼ˆæ¸…æ™°çš„èŒè´£ï¼‰
- âœ… æ˜“äºæµ‹è¯•ï¼ˆå±‚ä¸å±‚è§£è€¦ï¼‰
- âœ… æ˜“äºç†è§£ï¼ˆæ ‡å‡†çš„ç»“æ„ï¼‰

---

## ğŸ“š æ–‡æ¡£æ”¯æ’‘

| æ–‡æ¡£ | å†…å®¹ | ä½œç”¨ |
|-----|------|------|
| RESTRUCTURE_GUIDE.md | é‡æ„è§„åˆ’ | äº†è§£é‡æ„æ­¥éª¤ |
| RESTRUCTURE_COMPLETE.md | é‡æ„å®Œæˆè¯¦è§£ | ç†è§£æ–°æ¶æ„ |
| FOLDER_EXPLANATION.md | æ–‡ä»¶å¤¹é€šä¿—è§£é‡Š | å¿«é€Ÿä¸Šæ‰‹ |
| PROJECT_STRUCTURE.md | è¯¦ç»†æ¶æ„è¯´æ˜ | æ·±å…¥å­¦ä¹  |

---

## ğŸš€ ç°åœ¨å¯ä»¥åšçš„äº‹

### 1. éªŒè¯ç¼–è¯‘
```bash
mvn clean compile
# é¢„æœŸç»“æœï¼šBUILD SUCCESS
```

### 2. è¿è¡Œæµ‹è¯•
```bash
mvn test
# é¢„æœŸç»“æœï¼šæ‰€æœ‰æµ‹è¯•é€šè¿‡
```

### 3. å¯åŠ¨åº”ç”¨
```bash
# æ–¹å¼1ï¼šMaven
mvn clean spring-boot:run

# æ–¹å¼2ï¼šIDE
Run â†’ IsiApplication.main()

# é¢„æœŸç»“æœï¼šåº”ç”¨å¯åŠ¨åœ¨ http://localhost:8080
```

### 4. æµ‹è¯• API
```bash
# åˆ›å»ºè®¢å•
curl -X POST http://localhost:8080/api/orders \
  -H "Content-Type: application/json" \
  -d '{
    "customerId": "CUST001",
    "items": [
      {
        "productId": "PROD001",
        "productName": "ç¬”è®°æœ¬ç”µè„‘",
        "quantity": 1,
        "unitPrice": 5999.00
      }
    ]
  }'

# é¢„æœŸå“åº”ï¼š
# {
#   "id": 1,
#   "orderNumber": "ORD202412141234xxxx",
#   "customerId": "CUST001",
#   "status": "CREATED",
#   "totalAmount": 5999.00,
#   "currency": "CNY",
#   ...
# }
```

---

## ğŸ“‹ å››å±‚æ¶æ„é€ŸæŸ¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Interfaces Layerï¼ˆæ¥å£å±‚ï¼‰              â”‚
â”‚ interfaces/rest/                        â”‚
â”‚ èŒè´£ï¼šHTTP è¯·æ±‚/å“åº”                    â”‚
â”‚ OrderController.java                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Application Layerï¼ˆåº”ç”¨å±‚ï¼‰             â”‚
â”‚ application/                           â”‚
â”‚ èŒè´£ï¼šä¸šåŠ¡æµç¨‹ç¼–æ’ã€æ•°æ®è½¬æ¢            â”‚
â”‚ OrderApplicationService, OrderMapper   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Domain Layerï¼ˆé¢†åŸŸå±‚ï¼‰                  â”‚
â”‚ domain/                                â”‚
â”‚ èŒè´£ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€ä¸šåŠ¡è§„åˆ™            â”‚
â”‚ Order, OrderDomainService              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Infrastructure Layerï¼ˆåŸºç¡€è®¾æ–½å±‚ï¼‰      â”‚
â”‚ infrastructure/                        â”‚
â”‚ èŒè´£ï¼šæŠ€æœ¯å®ç°ã€æ•°æ®åº“ã€å¤–éƒ¨æœåŠ¡        â”‚
â”‚ JpaOrderRepository, InventoryAdapter   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ DDD æœ€ä½³å®è·µæ£€æŸ¥æ¸…å•

- âœ… èšåˆæ ¹ï¼ˆOrderï¼‰- æ¸…æ™°å®šä¹‰
- âœ… å€¼å¯¹è±¡ï¼ˆMoneyï¼‰- ä¸å¯å˜æ€§ä¿è¯
- âœ… å®ä½“ï¼ˆOrderItemï¼‰- èšåˆå†…å…³ç³»æ¸…æ™°
- âœ… é¢†åŸŸäº‹ä»¶ï¼ˆOrderCreatedEventï¼‰- äº‹ä»¶é©±åŠ¨
- âœ… ä»“å‚¨ï¼ˆOrderRepositoryï¼‰- æ¥å£å®šä¹‰åœ¨ domain
- âœ… é€‚é…å™¨ï¼ˆInventoryAdapterï¼‰- å¤–éƒ¨æœåŠ¡éš”ç¦»
- âœ… åˆ†å±‚æ¶æ„ï¼ˆ4 å±‚ï¼‰- èŒè´£æ¸…æ™°
- âœ… å‘½ä»¤æ¨¡å¼ï¼ˆCreateOrderCommandï¼‰- è¯·æ±‚å¯¹è±¡åŒ–
- âœ… DTO æ¨¡å¼ï¼ˆOrderDTOï¼‰- æ•°æ®ä¼ è¾“éš”ç¦»
- âœ… ä¾èµ–åè½¬ï¼ˆæ¥å£-å®ç°ï¼‰- è§£è€¦æ¸…æ™°

---

## ğŸ’¡ åç»­å¯ä»¥åšçš„äº‹

### çŸ­æœŸï¼ˆ1-2 å‘¨ï¼‰
- [ ] æ·»åŠ æ›´å¤š API ç«¯ç‚¹ï¼ˆæŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ï¼‰
- [ ] å®ç° CQRS æ¨¡å¼ï¼ˆè¯»å†™åˆ†ç¦»ï¼‰
- [ ] æ·»åŠ ä¸šåŠ¡è§„åˆ™éªŒè¯ï¼ˆSpecification æ¨¡å¼ï¼‰
- [ ] å®Œå–„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

### ä¸­æœŸï¼ˆ1-2 ä¸ªæœˆï¼‰
- [ ] é›†æˆæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆKafka/RabbitMQï¼‰
- [ ] å®ç°äº‹ä»¶æº¯æºï¼ˆEvent Sourcingï¼‰
- [ ] æ·»åŠ ç¼“å­˜å±‚ï¼ˆRedisï¼‰
- [ ] å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆSaga æ¨¡å¼ï¼‰

### é•¿æœŸï¼ˆ3+ ä¸ªæœˆï¼‰
- [ ] å¾®æœåŠ¡æ‹†åˆ†ï¼ˆè®¢å•ã€æ”¯ä»˜ã€åº“å­˜ç­‰ç‹¬ç«‹ï¼‰
- [ ] API ç½‘å…³é›†æˆ
- [ ] ç›‘æ§å’Œè¿½è¸ªï¼ˆELKã€Jaegerï¼‰
- [ ] å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆDockerã€Kubernetesï¼‰

---

## ğŸ¯ é¡¹ç›®ç°çŠ¶æ€»ç»“

```
åŸå§‹çŠ¶æ€ï¼ˆå¼€å§‹ï¼‰
â”œâ”€ æ··ä¹±çš„æ–‡ä»¶ç»„ç»‡
â”œâ”€ ä¾èµ–å…³ç³»ä¸æ¸…æ™°
â”œâ”€ ç¼ºå°‘å¼‚å¸¸ä½“ç³»
â”œâ”€ ç¼ºå°‘æ¥å£å±‚
â””â”€ åŸºç¡€è®¾æ–½å±‚æ··ä¹±

â†“ ç»è¿‡é‡æ„ â†“

å®ŒæˆçŠ¶æ€ï¼ˆç°åœ¨ï¼‰
â”œâ”€ æ¸…æ™°çš„å››å±‚æ¶æ„ âœ…
â”œâ”€ å•å‘ä¾èµ–æµå‘   âœ…
â”œâ”€ å®Œæ•´çš„å¼‚å¸¸ä½“ç³» âœ…
â”œâ”€ æ ‡å‡†çš„æ¥å£å±‚   âœ…
â”œâ”€ æœ‰ç»„ç»‡çš„åŸºç¡€è®¾æ–½å±‚ âœ…
â”œâ”€ å®Œæ•´çš„ä»£ç æ³¨é‡Š âœ…
â”œâ”€ æ¸…æ™°çš„èŒè´£åˆ’åˆ† âœ…
â””â”€ ä¼ä¸šçº§ä»£ç è´¨é‡ âœ…
```

---

## ğŸ† æˆå°±è§£é”

âœ¨ **æ­å–œï¼ä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ª**ï¼š
- âœ… å®Œå…¨ç¬¦åˆ DDD åŸåˆ™çš„é¡¹ç›®
- âœ… æ¸…æ™°çš„å››å±‚æ¶æ„
- âœ… æ ‡å‡†çš„é¡¹ç›®ç»“æ„
- âœ… ä¼ä¸šçº§çš„ä»£ç è´¨é‡
- âœ… é«˜åº¦å¯ç»´æŠ¤çš„ä»£ç åº“
- âœ… æ˜“äºæ‰©å±•çš„æ¶æ„
- âœ… å®Œæ•´çš„æ–‡æ¡£æ”¯æ’‘

**é¡¹ç›®å·²å‡†å¤‡å¥½æŠ•å…¥ç”Ÿäº§ï¼** ğŸš€

---

## ğŸ“ å¿«é€Ÿå‚è€ƒ

| éœ€æ±‚ | æ“ä½œä½ç½® |
|-----|---------|
| æ·»åŠ æ–°çš„ REST æ¥å£ | `interfaces/rest/OrderController.java` |
| å®ç°æ–°çš„ä¸šåŠ¡æµç¨‹ | `application/service/OrderApplicationService.java` |
| æ·»åŠ æ–°çš„ä¸šåŠ¡è§„åˆ™ | `domain/service/OrderDomainService.java` |
| æ·»åŠ æ–°çš„æ•°æ®æ¨¡å‹ | `domain/model/aggregate/` æˆ– `entity/` æˆ– `vo/` |
| æ·»åŠ æ–°çš„å¼‚å¸¸ | `domain/exception/` |
| è°ƒç”¨å¤–éƒ¨æœåŠ¡ | `infrastructure/service/` |
| æ“ä½œæ•°æ®åº“ | `infrastructure/persistence/` |
| å¤„ç†äº‹ä»¶ | `infrastructure/messaging/` |

---

**é‡æ„å®Œæˆæ—¥æœŸ**ï¼š2025-12-14  
**é¡¹ç›®è¯„çº§**ï¼šâ­â­â­â­â­ ä¼ä¸šçº§  
**ä¸‹ä¸€æ­¥**ï¼šå¼€å§‹å¼€å‘æ–°åŠŸèƒ½æˆ–è¿›è¡Œæ€§èƒ½ä¼˜åŒ–  

**ç¥è´ºï¼** ğŸ‰
